"use strict";
(self["webpackChunkedit"] = self["webpackChunkedit"] || []).push([["vendors-af305962"],{

/***/ 53413:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

/* harmony import */ var _css_loader_6_8_1_webpack_5_88_1_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11063);
/* harmony import */ var _css_loader_6_8_1_webpack_5_88_1_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_loader_6_8_1_webpack_5_88_1_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _css_loader_6_8_1_webpack_5_88_1_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(26143);
/* harmony import */ var _css_loader_6_8_1_webpack_5_88_1_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_css_loader_6_8_1_webpack_5_88_1_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _css_loader_6_8_1_webpack_5_88_1_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_css_loader_6_8_1_webpack_5_88_1_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n.monaco-editor .accessibilityHelpWidget {\n\tpadding: 10px;\n\tvertical-align: middle;\n\toverflow: scroll;\n\tcolor: var(--vscode-editorWidget-foreground);\n\tbackground-color: var(--vscode-editorWidget-background);\n\tbox-shadow: 0 2px 8px var(--vscode-widget-shadow);\n\tborder: 2px solid var(--vscode-contrastBorder);\n}\n", ""]);
// Exports
/* harmony default export */ __webpack_exports__.Z = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ 70148:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXTERNAL MODULE: ./node_modules/.pnpm/style-loader@3.3.3_webpack@5.88.1/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js
var injectStylesIntoStyleTag = __webpack_require__(79873);
var injectStylesIntoStyleTag_default = /*#__PURE__*/__webpack_require__.n(injectStylesIntoStyleTag);
// EXTERNAL MODULE: ./node_modules/.pnpm/style-loader@3.3.3_webpack@5.88.1/node_modules/style-loader/dist/runtime/styleDomAPI.js
var styleDomAPI = __webpack_require__(67152);
var styleDomAPI_default = /*#__PURE__*/__webpack_require__.n(styleDomAPI);
// EXTERNAL MODULE: ./node_modules/.pnpm/style-loader@3.3.3_webpack@5.88.1/node_modules/style-loader/dist/runtime/insertBySelector.js
var insertBySelector = __webpack_require__(77044);
var insertBySelector_default = /*#__PURE__*/__webpack_require__.n(insertBySelector);
// EXTERNAL MODULE: ./node_modules/.pnpm/style-loader@3.3.3_webpack@5.88.1/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js
var setAttributesWithoutAttributes = __webpack_require__(21114);
var setAttributesWithoutAttributes_default = /*#__PURE__*/__webpack_require__.n(setAttributesWithoutAttributes);
// EXTERNAL MODULE: ./node_modules/.pnpm/style-loader@3.3.3_webpack@5.88.1/node_modules/style-loader/dist/runtime/insertStyleElement.js
var insertStyleElement = __webpack_require__(11542);
var insertStyleElement_default = /*#__PURE__*/__webpack_require__.n(insertStyleElement);
// EXTERNAL MODULE: ./node_modules/.pnpm/style-loader@3.3.3_webpack@5.88.1/node_modules/style-loader/dist/runtime/styleTagTransform.js
var styleTagTransform = __webpack_require__(70204);
var styleTagTransform_default = /*#__PURE__*/__webpack_require__.n(styleTagTransform);
// EXTERNAL MODULE: ./node_modules/.pnpm/css-loader@6.8.1_webpack@5.88.1/node_modules/css-loader/dist/cjs.js!./node_modules/.pnpm/postcss-loader@7.3.3_postcss@8.4.25_webpack@5.88.1/node_modules/postcss-loader/dist/cjs.js!./node_modules/.pnpm/monaco-editor@0.39.0/node_modules/monaco-editor/esm/vs/editor/standalone/browser/accessibilityHelp/accessibilityHelp.css
var accessibilityHelp = __webpack_require__(53413);
;// CONCATENATED MODULE: ./node_modules/.pnpm/monaco-editor@0.39.0/node_modules/monaco-editor/esm/vs/editor/standalone/browser/accessibilityHelp/accessibilityHelp.css

      
      
      
      
      
      
      
      
      

var options = {};

options.styleTagTransform = (styleTagTransform_default());
options.setAttributes = (setAttributesWithoutAttributes_default());

      options.insert = insertBySelector_default().bind(null, "head");
    
options.domAPI = (styleDomAPI_default());
options.insertStyleElement = (insertStyleElement_default());

var update = injectStylesIntoStyleTag_default()(accessibilityHelp/* default */.Z, options);




       /* harmony default export */ var accessibilityHelp_accessibilityHelp = (accessibilityHelp/* default */.Z && accessibilityHelp/* default */.Z.locals ? accessibilityHelp/* default */.Z.locals : undefined);

// EXTERNAL MODULE: ./node_modules/.pnpm/monaco-editor@0.39.0/node_modules/monaco-editor/esm/vs/base/browser/dom.js
var dom = __webpack_require__(39862);
// EXTERNAL MODULE: ./node_modules/.pnpm/monaco-editor@0.39.0/node_modules/monaco-editor/esm/vs/base/browser/fastDomNode.js
var fastDomNode = __webpack_require__(30344);
// EXTERNAL MODULE: ./node_modules/.pnpm/monaco-editor@0.39.0/node_modules/monaco-editor/esm/vs/base/browser/ui/aria/aria.js + 1 modules
var aria = __webpack_require__(70385);
// EXTERNAL MODULE: ./node_modules/.pnpm/monaco-editor@0.39.0/node_modules/monaco-editor/esm/vs/base/browser/ui/widget.js
var widget = __webpack_require__(82194);
// EXTERNAL MODULE: ./node_modules/.pnpm/monaco-editor@0.39.0/node_modules/monaco-editor/esm/vs/base/common/lifecycle.js
var lifecycle = __webpack_require__(79027);
// EXTERNAL MODULE: ./node_modules/.pnpm/monaco-editor@0.39.0/node_modules/monaco-editor/esm/vs/base/common/platform.js
var platform = __webpack_require__(94057);
// EXTERNAL MODULE: ./node_modules/.pnpm/monaco-editor@0.39.0/node_modules/monaco-editor/esm/vs/base/common/strings.js
var strings = __webpack_require__(23607);
// EXTERNAL MODULE: ./node_modules/.pnpm/monaco-editor@0.39.0/node_modules/monaco-editor/esm/vs/base/common/uri.js
var uri = __webpack_require__(56946);
// EXTERNAL MODULE: ./node_modules/.pnpm/monaco-editor@0.39.0/node_modules/monaco-editor/esm/vs/editor/browser/editorExtensions.js
var editorExtensions = __webpack_require__(91213);
// EXTERNAL MODULE: ./node_modules/.pnpm/monaco-editor@0.39.0/node_modules/monaco-editor/esm/vs/editor/common/editorContextKeys.js
var editorContextKeys = __webpack_require__(94872);
// EXTERNAL MODULE: ./node_modules/.pnpm/monaco-editor@0.39.0/node_modules/monaco-editor/esm/vs/editor/contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js
var toggleTabFocusMode = __webpack_require__(56970);
// EXTERNAL MODULE: ./node_modules/.pnpm/monaco-editor@0.39.0/node_modules/monaco-editor/esm/vs/platform/contextkey/common/contextkey.js + 1 modules
var contextkey = __webpack_require__(81043);
// EXTERNAL MODULE: ./node_modules/.pnpm/monaco-editor@0.39.0/node_modules/monaco-editor/esm/vs/platform/instantiation/common/instantiation.js
var instantiation = __webpack_require__(38048);
// EXTERNAL MODULE: ./node_modules/.pnpm/monaco-editor@0.39.0/node_modules/monaco-editor/esm/vs/platform/keybinding/common/keybinding.js
var keybinding = __webpack_require__(19267);
// EXTERNAL MODULE: ./node_modules/.pnpm/monaco-editor@0.39.0/node_modules/monaco-editor/esm/vs/platform/opener/common/opener.js
var common_opener = __webpack_require__(38876);
// EXTERNAL MODULE: ./node_modules/.pnpm/monaco-editor@0.39.0/node_modules/monaco-editor/esm/vs/editor/common/standaloneStrings.js
var standaloneStrings = __webpack_require__(62688);
;// CONCATENATED MODULE: ./node_modules/.pnpm/monaco-editor@0.39.0/node_modules/monaco-editor/esm/vs/editor/standalone/browser/accessibilityHelp/accessibilityHelp.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};

















const CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE = new contextkey/* RawContextKey */.uy('accessibilityHelpWidgetVisible', false);
let AccessibilityHelpController = class AccessibilityHelpController extends lifecycle/* Disposable */.JT {
    static get(editor) {
        return editor.getContribution(AccessibilityHelpController.ID);
    }
    constructor(editor, instantiationService) {
        super();
        this._editor = editor;
        this._widget = this._register(instantiationService.createInstance(AccessibilityHelpWidget, this._editor));
    }
    show() {
        this._widget.show();
    }
    hide() {
        this._widget.hide();
    }
};
AccessibilityHelpController.ID = 'editor.contrib.accessibilityHelpController';
AccessibilityHelpController = __decorate([
    __param(1, instantiation/* IInstantiationService */.TG)
], AccessibilityHelpController);
function getSelectionLabel(selections, charactersSelected) {
    if (!selections || selections.length === 0) {
        return standaloneStrings/* AccessibilityHelpNLS */.Oe.noSelection;
    }
    if (selections.length === 1) {
        if (charactersSelected) {
            return strings/* format */.WU(standaloneStrings/* AccessibilityHelpNLS */.Oe.singleSelectionRange, selections[0].positionLineNumber, selections[0].positionColumn, charactersSelected);
        }
        return strings/* format */.WU(standaloneStrings/* AccessibilityHelpNLS */.Oe.singleSelection, selections[0].positionLineNumber, selections[0].positionColumn);
    }
    if (charactersSelected) {
        return strings/* format */.WU(standaloneStrings/* AccessibilityHelpNLS */.Oe.multiSelectionRange, selections.length, charactersSelected);
    }
    if (selections.length > 0) {
        return strings/* format */.WU(standaloneStrings/* AccessibilityHelpNLS */.Oe.multiSelection, selections.length);
    }
    return '';
}
let AccessibilityHelpWidget = class AccessibilityHelpWidget extends widget/* Widget */.$ {
    constructor(editor, _contextKeyService, _keybindingService, _openerService) {
        super();
        this._contextKeyService = _contextKeyService;
        this._keybindingService = _keybindingService;
        this._openerService = _openerService;
        this._editor = editor;
        this._isVisibleKey = CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE.bindTo(this._contextKeyService);
        this._domNode = (0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));
        this._domNode.setClassName('accessibilityHelpWidget');
        this._domNode.setDisplay('none');
        this._domNode.setAttribute('role', 'dialog');
        this._domNode.setAttribute('aria-modal', 'true');
        this._domNode.setAttribute('aria-hidden', 'true');
        const heading = (0,dom/* append */.R3)(this._domNode.domNode, (0,dom.$)('h1', undefined, standaloneStrings/* AccessibilityHelpNLS */.Oe.accessibilityHelpTitle));
        heading.id = 'help-dialog-heading';
        this._domNode.setAttribute('aria-labelledby', heading.id);
        this._contentDomNode = (0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));
        this._contentDomNode.setAttribute('role', 'document');
        this._contentDomNode.domNode.id = 'help-dialog-content';
        this._domNode.appendChild(this._contentDomNode);
        this._contentDomNode.setAttribute('aria-describedby', this._contentDomNode.domNode.id);
        this._isVisible = false;
        this._register(this._editor.onDidLayoutChange(() => {
            if (this._isVisible) {
                this._layout();
            }
        }));
        // Intentionally not configurable!
        this._register((0,dom/* addStandardDisposableListener */.mu)(this._contentDomNode.domNode, 'keydown', (e) => {
            if (!this._isVisible) {
                return;
            }
            if (e.equals(2048 /* KeyMod.CtrlCmd */ | 35 /* KeyCode.KeyE */)) {
                (0,aria/* alert */.Z9)(standaloneStrings/* AccessibilityHelpNLS */.Oe.emergencyConfOn);
                this._editor.updateOptions({
                    accessibilitySupport: 'on'
                });
                (0,dom/* clearNode */.PO)(this._contentDomNode.domNode);
                this._buildContent();
                this._contentDomNode.domNode.focus();
                e.preventDefault();
                e.stopPropagation();
            }
            if (e.equals(2048 /* KeyMod.CtrlCmd */ | 38 /* KeyCode.KeyH */)) {
                (0,aria/* alert */.Z9)(standaloneStrings/* AccessibilityHelpNLS */.Oe.openingDocs);
                let url = this._editor.getRawOptions().accessibilityHelpUrl;
                if (typeof url === 'undefined') {
                    url = 'https://go.microsoft.com/fwlink/?linkid=852450';
                }
                this._openerService.open(uri/* URI */.o.parse(url));
                e.preventDefault();
                e.stopPropagation();
            }
        }));
        this.onblur(this._contentDomNode.domNode, () => {
            this.hide();
        });
        this._editor.addOverlayWidget(this);
    }
    dispose() {
        this._editor.removeOverlayWidget(this);
        super.dispose();
    }
    getId() {
        return AccessibilityHelpWidget.ID;
    }
    getDomNode() {
        return this._domNode.domNode;
    }
    getPosition() {
        return {
            preference: null
        };
    }
    show() {
        if (this._isVisible) {
            return;
        }
        this._isVisible = true;
        this._isVisibleKey.set(true);
        this._layout();
        this._domNode.setDisplay('block');
        this._domNode.setAttribute('aria-hidden', 'false');
        this._contentDomNode.domNode.tabIndex = 0;
        this._buildContent();
        this._contentDomNode.domNode.focus();
    }
    _descriptionForCommand(commandId, msg, noKbMsg) {
        const kb = this._keybindingService.lookupKeybinding(commandId);
        if (kb) {
            return strings/* format */.WU(msg, kb.getAriaLabel());
        }
        return strings/* format */.WU(noKbMsg, commandId);
    }
    _buildContent() {
        const contentDomNode = this._contentDomNode.domNode;
        const options = this._editor.getOptions();
        const selections = this._editor.getSelections();
        let charactersSelected = 0;
        if (selections) {
            const model = this._editor.getModel();
            if (model) {
                selections.forEach((selection) => {
                    charactersSelected += model.getValueLengthInRange(selection);
                });
            }
        }
        (0,dom/* append */.R3)(contentDomNode, (0,dom.$)('p', undefined, getSelectionLabel(selections, charactersSelected)));
        const top = (0,dom/* append */.R3)(contentDomNode, (0,dom.$)('p'));
        if (options.get(59 /* EditorOption.inDiffEditor */)) {
            if (options.get(88 /* EditorOption.readOnly */)) {
                top.textContent = standaloneStrings/* AccessibilityHelpNLS */.Oe.readonlyDiffEditor;
            }
            else {
                top.textContent = standaloneStrings/* AccessibilityHelpNLS */.Oe.editableDiffEditor;
            }
        }
        else {
            if (options.get(88 /* EditorOption.readOnly */)) {
                top.textContent = standaloneStrings/* AccessibilityHelpNLS */.Oe.readonlyEditor;
            }
            else {
                top.textContent = standaloneStrings/* AccessibilityHelpNLS */.Oe.editableEditor;
            }
        }
        const instructions = (0,dom/* append */.R3)(contentDomNode, (0,dom.$)('ul'));
        const turnOnMessage = (platform/* isMacintosh */.dz
            ? standaloneStrings/* AccessibilityHelpNLS */.Oe.changeConfigToOnMac
            : standaloneStrings/* AccessibilityHelpNLS */.Oe.changeConfigToOnWinLinux);
        switch (options.get(2 /* EditorOption.accessibilitySupport */)) {
            case 0 /* AccessibilitySupport.Unknown */:
                (0,dom/* append */.R3)(instructions, (0,dom.$)('li', undefined, turnOnMessage));
                break;
            case 2 /* AccessibilitySupport.Enabled */:
                (0,dom/* append */.R3)(instructions, (0,dom.$)('li', undefined, standaloneStrings/* AccessibilityHelpNLS */.Oe.auto_on));
                break;
            case 1 /* AccessibilitySupport.Disabled */:
                (0,dom/* append */.R3)(instructions, (0,dom.$)('li', undefined, standaloneStrings/* AccessibilityHelpNLS */.Oe.auto_off, turnOnMessage));
                break;
        }
        if (options.get(139 /* EditorOption.tabFocusMode */)) {
            (0,dom/* append */.R3)(instructions, (0,dom.$)('li', undefined, this._descriptionForCommand(toggleTabFocusMode.ToggleTabFocusModeAction.ID, standaloneStrings/* AccessibilityHelpNLS */.Oe.tabFocusModeOnMsg, standaloneStrings/* AccessibilityHelpNLS */.Oe.tabFocusModeOnMsgNoKb)));
        }
        else {
            (0,dom/* append */.R3)(instructions, (0,dom.$)('li', undefined, this._descriptionForCommand(toggleTabFocusMode.ToggleTabFocusModeAction.ID, standaloneStrings/* AccessibilityHelpNLS */.Oe.tabFocusModeOffMsg, standaloneStrings/* AccessibilityHelpNLS */.Oe.tabFocusModeOffMsgNoKb)));
        }
        const openDocMessage = (platform/* isMacintosh */.dz
            ? standaloneStrings/* AccessibilityHelpNLS */.Oe.openDocMac
            : standaloneStrings/* AccessibilityHelpNLS */.Oe.openDocWinLinux);
        (0,dom/* append */.R3)(instructions, (0,dom.$)('li', undefined, openDocMessage));
        (0,dom/* append */.R3)(contentDomNode, (0,dom.$)('p', undefined, standaloneStrings/* AccessibilityHelpNLS */.Oe.outroMsg));
    }
    hide() {
        if (!this._isVisible) {
            return;
        }
        this._isVisible = false;
        this._isVisibleKey.reset();
        this._domNode.setDisplay('none');
        this._domNode.setAttribute('aria-hidden', 'true');
        this._contentDomNode.domNode.tabIndex = -1;
        (0,dom/* clearNode */.PO)(this._contentDomNode.domNode);
        this._editor.focus();
    }
    _layout() {
        const editorLayout = this._editor.getLayoutInfo();
        const w = Math.max(5, Math.min(AccessibilityHelpWidget.WIDTH, editorLayout.width - 40));
        const h = Math.max(5, Math.min(AccessibilityHelpWidget.HEIGHT, editorLayout.height - 40));
        this._domNode.setWidth(w);
        this._domNode.setHeight(h);
        const top = Math.round((editorLayout.height - h) / 2);
        this._domNode.setTop(top);
        const left = Math.round((editorLayout.width - w) / 2);
        this._domNode.setLeft(left);
    }
};
AccessibilityHelpWidget.ID = 'editor.contrib.accessibilityHelpWidget';
AccessibilityHelpWidget.WIDTH = 500;
AccessibilityHelpWidget.HEIGHT = 300;
AccessibilityHelpWidget = __decorate([
    __param(1, contextkey/* IContextKeyService */.i6),
    __param(2, keybinding/* IKeybindingService */.d),
    __param(3, common_opener/* IOpenerService */.v4)
], AccessibilityHelpWidget);
class ShowAccessibilityHelpAction extends editorExtensions/* EditorAction */.R6 {
    constructor() {
        super({
            id: 'editor.action.showAccessibilityHelp',
            label: standaloneStrings/* AccessibilityHelpNLS */.Oe.showAccessibilityHelpAction,
            alias: 'Show Accessibility Help',
            precondition: undefined,
            kbOpts: {
                primary: 512 /* KeyMod.Alt */ | 59 /* KeyCode.F1 */,
                weight: 100 /* KeybindingWeight.EditorContrib */,
                linux: {
                    primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 59 /* KeyCode.F1 */,
                    secondary: [512 /* KeyMod.Alt */ | 59 /* KeyCode.F1 */]
                }
            }
        });
    }
    run(accessor, editor) {
        const controller = AccessibilityHelpController.get(editor);
        controller === null || controller === void 0 ? void 0 : controller.show();
    }
}
(0,editorExtensions/* registerEditorContribution */._K)(AccessibilityHelpController.ID, AccessibilityHelpController, 4 /* EditorContributionInstantiation.Lazy */);
(0,editorExtensions/* registerEditorAction */.Qr)(ShowAccessibilityHelpAction);
const AccessibilityHelpCommand = editorExtensions/* EditorCommand */._l.bindToContribution(AccessibilityHelpController.get);
(0,editorExtensions/* registerEditorCommand */.fK)(new AccessibilityHelpCommand({
    id: 'closeAccessibilityHelp',
    precondition: CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE,
    handler: x => x.hide(),
    kbOpts: {
        weight: 100 /* KeybindingWeight.EditorContrib */ + 100,
        kbExpr: editorContextKeys/* EditorContextKeys */.u.focus,
        primary: 9 /* KeyCode.Escape */,
        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]
    }
}));


/***/ }),

/***/ 78798:
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   V: function() { return /* binding */ Colorizer; }
/* harmony export */ });
/* harmony import */ var _base_browser_trustedTypes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99522);
/* harmony import */ var _base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(23607);
/* harmony import */ var _common_languages_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(58606);
/* harmony import */ var _common_tokens_lineTokens_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(15834);
/* harmony import */ var _common_viewLayout_viewLineRenderer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(71850);
/* harmony import */ var _common_viewModel_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(76414);
/* harmony import */ var _common_monarch_monarchLexer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(9220);
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};







const ttPolicy = (0,_base_browser_trustedTypes_js__WEBPACK_IMPORTED_MODULE_0__/* .createTrustedTypesPolicy */ .Z)('standaloneColorizer', { createHTML: value => value });
class Colorizer {
    static colorizeElement(themeService, languageService, domNode, options) {
        options = options || {};
        const theme = options.theme || 'vs';
        const mimeType = options.mimeType || domNode.getAttribute('lang') || domNode.getAttribute('data-lang');
        if (!mimeType) {
            console.error('Mode not detected');
            return Promise.resolve();
        }
        const languageId = languageService.getLanguageIdByMimeType(mimeType) || mimeType;
        themeService.setTheme(theme);
        const text = domNode.firstChild ? domNode.firstChild.nodeValue : '';
        domNode.className += ' ' + theme;
        const render = (str) => {
            var _a;
            const trustedhtml = (_a = ttPolicy === null || ttPolicy === void 0 ? void 0 : ttPolicy.createHTML(str)) !== null && _a !== void 0 ? _a : str;
            domNode.innerHTML = trustedhtml;
        };
        return this.colorize(languageService, text || '', languageId, options).then(render, (err) => console.error(err));
    }
    static colorize(languageService, text, languageId, options) {
        return __awaiter(this, void 0, void 0, function* () {
            const languageIdCodec = languageService.languageIdCodec;
            let tabSize = 4;
            if (options && typeof options.tabSize === 'number') {
                tabSize = options.tabSize;
            }
            if (_base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__/* .startsWithUTF8BOM */ .uS(text)) {
                text = text.substr(1);
            }
            const lines = _base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__/* .splitLines */ .uq(text);
            if (!languageService.isRegisteredLanguageId(languageId)) {
                return _fakeColorize(lines, tabSize, languageIdCodec);
            }
            const tokenizationSupport = yield _common_languages_js__WEBPACK_IMPORTED_MODULE_2__/* .TokenizationRegistry */ .RW.getOrCreate(languageId);
            if (tokenizationSupport) {
                return _colorize(lines, tabSize, tokenizationSupport, languageIdCodec);
            }
            return _fakeColorize(lines, tabSize, languageIdCodec);
        });
    }
    static colorizeLine(line, mightContainNonBasicASCII, mightContainRTL, tokens, tabSize = 4) {
        const isBasicASCII = _common_viewModel_js__WEBPACK_IMPORTED_MODULE_5__/* .ViewLineRenderingData */ .wA.isBasicASCII(line, mightContainNonBasicASCII);
        const containsRTL = _common_viewModel_js__WEBPACK_IMPORTED_MODULE_5__/* .ViewLineRenderingData */ .wA.containsRTL(line, isBasicASCII, mightContainRTL);
        const renderResult = (0,_common_viewLayout_viewLineRenderer_js__WEBPACK_IMPORTED_MODULE_4__/* .renderViewLine2 */ .tF)(new _common_viewLayout_viewLineRenderer_js__WEBPACK_IMPORTED_MODULE_4__/* .RenderLineInput */ .IJ(false, true, line, false, isBasicASCII, containsRTL, 0, tokens, [], tabSize, 0, 0, 0, 0, -1, 'none', false, false, null));
        return renderResult.html;
    }
    static colorizeModelLine(model, lineNumber, tabSize = 4) {
        const content = model.getLineContent(lineNumber);
        model.tokenization.forceTokenization(lineNumber);
        const tokens = model.tokenization.getLineTokens(lineNumber);
        const inflatedTokens = tokens.inflate();
        return this.colorizeLine(content, model.mightContainNonBasicASCII(), model.mightContainRTL(), inflatedTokens, tabSize);
    }
}
function _colorize(lines, tabSize, tokenizationSupport, languageIdCodec) {
    return new Promise((c, e) => {
        const execute = () => {
            const result = _actualColorize(lines, tabSize, tokenizationSupport, languageIdCodec);
            if (tokenizationSupport instanceof _common_monarch_monarchLexer_js__WEBPACK_IMPORTED_MODULE_6__/* .MonarchTokenizer */ .A) {
                const status = tokenizationSupport.getLoadStatus();
                if (status.loaded === false) {
                    status.promise.then(execute, e);
                    return;
                }
            }
            c(result);
        };
        execute();
    });
}
function _fakeColorize(lines, tabSize, languageIdCodec) {
    let html = [];
    const defaultMetadata = ((0 /* FontStyle.None */ << 11 /* MetadataConsts.FONT_STYLE_OFFSET */)
        | (1 /* ColorId.DefaultForeground */ << 15 /* MetadataConsts.FOREGROUND_OFFSET */)
        | (2 /* ColorId.DefaultBackground */ << 24 /* MetadataConsts.BACKGROUND_OFFSET */)) >>> 0;
    const tokens = new Uint32Array(2);
    tokens[0] = 0;
    tokens[1] = defaultMetadata;
    for (let i = 0, length = lines.length; i < length; i++) {
        const line = lines[i];
        tokens[0] = line.length;
        const lineTokens = new _common_tokens_lineTokens_js__WEBPACK_IMPORTED_MODULE_3__/* .LineTokens */ .A(tokens, line, languageIdCodec);
        const isBasicASCII = _common_viewModel_js__WEBPACK_IMPORTED_MODULE_5__/* .ViewLineRenderingData */ .wA.isBasicASCII(line, /* check for basic ASCII */ true);
        const containsRTL = _common_viewModel_js__WEBPACK_IMPORTED_MODULE_5__/* .ViewLineRenderingData */ .wA.containsRTL(line, isBasicASCII, /* check for RTL */ true);
        const renderResult = (0,_common_viewLayout_viewLineRenderer_js__WEBPACK_IMPORTED_MODULE_4__/* .renderViewLine2 */ .tF)(new _common_viewLayout_viewLineRenderer_js__WEBPACK_IMPORTED_MODULE_4__/* .RenderLineInput */ .IJ(false, true, line, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, 0, 0, 0, -1, 'none', false, false, null));
        html = html.concat(renderResult.html);
        html.push('<br/>');
    }
    return html.join('');
}
function _actualColorize(lines, tabSize, tokenizationSupport, languageIdCodec) {
    let html = [];
    let state = tokenizationSupport.getInitialState();
    for (let i = 0, length = lines.length; i < length; i++) {
        const line = lines[i];
        const tokenizeResult = tokenizationSupport.tokenizeEncoded(line, true, state);
        _common_tokens_lineTokens_js__WEBPACK_IMPORTED_MODULE_3__/* .LineTokens */ .A.convertToEndOffset(tokenizeResult.tokens, line.length);
        const lineTokens = new _common_tokens_lineTokens_js__WEBPACK_IMPORTED_MODULE_3__/* .LineTokens */ .A(tokenizeResult.tokens, line, languageIdCodec);
        const isBasicASCII = _common_viewModel_js__WEBPACK_IMPORTED_MODULE_5__/* .ViewLineRenderingData */ .wA.isBasicASCII(line, /* check for basic ASCII */ true);
        const containsRTL = _common_viewModel_js__WEBPACK_IMPORTED_MODULE_5__/* .ViewLineRenderingData */ .wA.containsRTL(line, isBasicASCII, /* check for RTL */ true);
        const renderResult = (0,_common_viewLayout_viewLineRenderer_js__WEBPACK_IMPORTED_MODULE_4__/* .renderViewLine2 */ .tF)(new _common_viewLayout_viewLineRenderer_js__WEBPACK_IMPORTED_MODULE_4__/* .RenderLineInput */ .IJ(false, true, line, false, isBasicASCII, containsRTL, 0, lineTokens.inflate(), [], tabSize, 0, 0, 0, 0, -1, 'none', false, false, null));
        html = html.concat(renderResult.html);
        html.push('<br/>');
        state = tokenizeResult.endState;
    }
    return html.join('');
}


/***/ })

}]);